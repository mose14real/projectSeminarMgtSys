function OmitterDom(c,b,a){this.dom=c;this.domContent=c.innerText;this.ellipsis=null;this.ellipsisContent=a;this.ellipsisWidth=null;this.charactors=null;this.charactorsWidth=null;this.charactorHeights=null;this.charactorLefts=null;this.charactorTops=null;this.root=null;this.maxTop=null;this.maxHeight=null;this.count=b;this.init()}OmitterDom.prototype.init1=function(){var a=this.dom.childNodes.length-1;while(-1<a){this.dom.removeChild(this.dom.childNodes[a]);a=(a-1)|0}};OmitterDom.prototype.init2=function(){var h=document.createElement("div");h.classList.add("omitter");var c=document.createElement("div");c.classList.add("omitter-charactors");var b=document.createDocumentFragment();var d=0;var e=this.domContent.length;while(d<e){var a=document.createElement("span");var g=document.createTextNode(this.domContent[d]);a.appendChild(g);a.classList.add("omitter-charactor");b.appendChild(a);d=(d+1)|0}if(this.ellipsisContent&&this.ellipsisContent.length){var j=document.createElement("span");var f=document.createTextNode(this.ellipsisContent);j.appendChild(f);j.classList.add("omitter-ellipsis");h.appendChild(j);this.ellipsis=j}c.appendChild(b);this.charactors=c;h.appendChild(c);this.dom.appendChild(h);this.root=h};OmitterDom.prototype.init=function(){this.init1();this.init2()};OmitterDom.prototype.omit1=function(){var c=this.ellipsis.offsetWidth;var g=this.charactors.offsetWidth;var f=new Array();var a=new Array();var e=new Array();var b=0;var d=this.charactors.childNodes.length;while(b<d){f.push(this.charactors.childNodes[b].offsetHeight);a.push(this.charactors.childNodes[b].offsetLeft);e.push(this.charactors.childNodes[b].offsetTop);b=(b+1)|0}this.ellipsisWidth=c;this.charactorsWidth=g;this.charactorHeights=f;this.charactorLefts=a;this.charactorTops=e};OmitterDom.prototype.omit2=function(){var c=new Array();var a=0;var b=this.charactorTops.length;while(a<b){var d=this.charactorTops[a];if(c.indexOf(d)==-1){c.push(d)}a=(a+1)|0}this.maxTop=c.length==0?0:c[Math.min(c.length-1,this.count-1)];this.hideable=this.count<c.length;if(this.hideable){this.ellipsis.classList.remove("omitter-hidden")}else{this.ellipsis.classList.add("omitter-hidden")}};OmitterDom.prototype.omit3=function(){this.maxHeight=0;var a=this.charactorTops.length-1;while(-1<a){if(this.charactorTops[a]==this.maxTop){this.maxHeight=Math.max(this.maxHeight,this.charactorHeights[a])}a=(a-1)|0}};OmitterDom.prototype.omit4=function(){var a=false;var b=this.charactors.childNodes.length-1;while(-1<b){if(this.maxTop<this.charactorTops[b]){this.charactors.childNodes[b].classList.add("omitter-hidden")}else{if(this.maxTop==this.charactorTops[b]){if(this.ellipsisWidth<this.charactorsWidth-this.charactorLefts[b]){if(!a&&this.hideable){a=true;this.ellipsis.style.top=this.charactorTops[b]+"px";this.ellipsis.style.left=this.charactorLefts[b]+"px";this.charactors.childNodes[b].classList.add("omitter-hidden")}else{this.charactors.childNodes[b].classList.remove("omitter-hidden")}}else{this.charactors.childNodes[b].classList.add("omitter-hidden")}}else{this.charactors.childNodes[b].classList.remove("omitter-hidden")}}b=(b-1)|0}this.root.style.maxHeight=(this.maxTop+this.maxHeight).toString()+"px"};OmitterDom.prototype.omit=function(){this.omit1();this.omit2();this.omit3();this.omit4()};OmitterDom.prototype.unomit1=function(){this.ellipsis.classList.add("omitter-hidden")};OmitterDom.prototype.unomit2=function(){var a=this.charactors.childNodes.length-1;while(-1<a){this.charactors.childNodes[a].classList.remove("omitter-hidden");a=(a-1)|0}};OmitterDom.prototype.unomit3=function(){this.root.style.maxHeight=null};OmitterDom.prototype.unomit=function(){this.unomit1();this.unomit2();this.unomit3()};function Omitter(c,b,a){this.status=false;if(window.jQuery&&c instanceof window.jQuery){c=c.toArray()}this.doms=Array.prototype.slice.call(c).map(function(d){return new OmitterDom(d,b,a)})}Omitter.prototype.omit=function(){this.status=true;this.doms.map(function(a){a.omit1()});this.doms.map(function(a){a.omit2()});this.doms.map(function(a){a.omit3()});this.doms.map(function(a){a.omit4()})};Omitter.prototype.unomit=function(){this.status&&this.doms.map(function(a){a.unomit()});this.status=false};Omitter.prototype.toggle=function(){this.status?this.unomit():this.omit()};Omitter.prototype.update=function(){this.status?this.omit():this.unomit()};